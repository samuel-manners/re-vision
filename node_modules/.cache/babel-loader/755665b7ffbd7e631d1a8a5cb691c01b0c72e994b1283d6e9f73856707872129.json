{"ast":null,"code":"import React, { useRef, useState, useEffect, useImperativeHandle } from 'react';\nimport styled from 'styled-components';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n  return cooked;\n}\nvar Wrapper = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"])));\nvar Container = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  width: 100%;\\n  \", \"\\n\"], [\"\\n  width: 100%;\\n  \", \"\\n\"])), function (_a) {\n  var aspectRatio = _a.aspectRatio;\n  return aspectRatio === 'cover' ? \"\\n    position: absolute;\\n    bottom: 0;\\n    top: 0;\\n    left: 0;\\n    right: 0;\" : \"\\n    position: relative;\\n    padding-bottom: \" + 100 / aspectRatio + \"%;\";\n});\nvar ErrorMsg = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  padding: 40px;\\n\"], [\"\\n  padding: 40px;\\n\"])));\nvar Cam = styled.video(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"])), function (_a) {\n  var mirrored = _a.mirrored;\n  return mirrored ? '180deg' : '0deg';\n});\nvar Canvas = styled.canvas(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  display: none;\\n\"], [\"\\n  display: none;\\n\"])));\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\nvar Camera = React.forwardRef(function (_a, ref) {\n  var _b = _a.facingMode,\n    facingMode = _b === void 0 ? 'user' : _b,\n    _c = _a.aspectRatio,\n    aspectRatio = _c === void 0 ? 'cover' : _c,\n    _d = _a.numberOfCamerasCallback,\n    numberOfCamerasCallback = _d === void 0 ? function () {\n      return null;\n    } : _d,\n    _e = _a.videoSourceDeviceId,\n    videoSourceDeviceId = _e === void 0 ? undefined : _e,\n    _f = _a.errorMessages,\n    errorMessages = _f === void 0 ? {\n      noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\n      permissionDenied: 'Permission denied. Please refresh and give camera permission.',\n      switchCamera: 'It is not possible to switch camera to different one because there is only one video device accessible.',\n      canvas: 'Canvas is not supported.'\n    } : _f,\n    _g = _a.videoReadyCallback,\n    videoReadyCallback = _g === void 0 ? function () {\n      return null;\n    } : _g;\n  var player = useRef(null);\n  var canvas = useRef(null);\n  var container = useRef(null);\n  var _h = useState(0),\n    numberOfCameras = _h[0],\n    setNumberOfCameras = _h[1];\n  var _j = useState(null),\n    stream = _j[0],\n    setStream = _j[1];\n  var _k = useState(facingMode),\n    currentFacingMode = _k[0],\n    setFacingMode = _k[1];\n  var _l = useState(false),\n    notSupported = _l[0],\n    setNotSupported = _l[1];\n  var _m = useState(false),\n    permissionDenied = _m[0],\n    setPermissionDenied = _m[1];\n  useEffect(function () {\n    numberOfCamerasCallback(numberOfCameras);\n  }, [numberOfCameras]);\n  useImperativeHandle(ref, function () {\n    return {\n      takePhoto: function () {\n        var _a, _b, _c, _d;\n        if (numberOfCameras < 1) {\n          throw new Error(errorMessages.noCameraAccessible);\n        }\n        if (canvas === null || canvas === void 0 ? void 0 : canvas.current) {\n          var playerWidth = ((_a = player === null || player === void 0 ? void 0 : player.current) === null || _a === void 0 ? void 0 : _a.videoWidth) || 1280;\n          var playerHeight = ((_b = player === null || player === void 0 ? void 0 : player.current) === null || _b === void 0 ? void 0 : _b.videoHeight) || 720;\n          var playerAR = playerWidth / playerHeight;\n          var canvasWidth = ((_c = container === null || container === void 0 ? void 0 : container.current) === null || _c === void 0 ? void 0 : _c.offsetWidth) || 1280;\n          var canvasHeight = ((_d = container === null || container === void 0 ? void 0 : container.current) === null || _d === void 0 ? void 0 : _d.offsetHeight) || 1280;\n          var canvasAR = canvasWidth / canvasHeight;\n          var sX = void 0,\n            sY = void 0,\n            sW = void 0,\n            sH = void 0;\n          if (playerAR > canvasAR) {\n            sH = playerHeight;\n            sW = playerHeight * canvasAR;\n            sX = (playerWidth - sW) / 2;\n            sY = 0;\n          } else {\n            sW = playerWidth;\n            sH = playerWidth / canvasAR;\n            sX = 0;\n            sY = (playerHeight - sH) / 2;\n          }\n          canvas.current.width = sW;\n          canvas.current.height = sH;\n          var context = canvas.current.getContext('2d');\n          if (context && (player === null || player === void 0 ? void 0 : player.current)) {\n            context.drawImage(player.current, sX, sY, sW, sH, 0, 0, sW, sH);\n          }\n          var imgData = canvas.current.toDataURL('image/jpeg');\n          return imgData;\n        } else {\n          throw new Error(errorMessages.canvas);\n        }\n      },\n      switchCamera: function () {\n        if (numberOfCameras < 1) {\n          throw new Error(errorMessages.noCameraAccessible);\n        } else if (numberOfCameras < 2) {\n          console.error('Error: Unable to switch camera. Only one device is accessible.'); // console only\n        }\n        var newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';\n        setFacingMode(newFacingMode);\n        return newFacingMode;\n      },\n      getNumberOfCameras: function () {\n        return numberOfCameras;\n      }\n    };\n  });\n  useEffect(function () {\n    initCameraStream(stream, setStream, currentFacingMode, videoSourceDeviceId, setNumberOfCameras, setNotSupported, setPermissionDenied);\n  }, [currentFacingMode, videoSourceDeviceId]);\n  useEffect(function () {\n    if (stream && player && player.current) {\n      player.current.srcObject = stream;\n    }\n    return function () {\n      if (stream) {\n        stream.getTracks().forEach(function (track) {\n          track.stop();\n        });\n      }\n    };\n  }, [stream]);\n  return React.createElement(Container, {\n    ref: container,\n    aspectRatio: aspectRatio\n  }, React.createElement(Wrapper, null, notSupported ? React.createElement(ErrorMsg, null, errorMessages.noCameraAccessible) : null, permissionDenied ? React.createElement(ErrorMsg, null, errorMessages.permissionDenied) : null, React.createElement(Cam, {\n    ref: player,\n    id: \"video\",\n    muted: true,\n    autoPlay: true,\n    playsInline: true,\n    mirrored: currentFacingMode === 'user' ? true : false,\n    onLoadedData: function () {\n      videoReadyCallback();\n    }\n  }), React.createElement(Canvas, {\n    ref: canvas\n  })));\n});\nCamera.displayName = 'Camera';\nvar initCameraStream = function (stream, setStream, currentFacingMode, videoSourceDeviceId, setNumberOfCameras, setNotSupported, setPermissionDenied) {\n  var _a;\n  // stop any active streams in the window\n  if (stream) {\n    stream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n  var constraints = {\n    audio: false,\n    video: {\n      deviceId: videoSourceDeviceId ? {\n        exact: videoSourceDeviceId\n      } : undefined,\n      facingMode: currentFacingMode,\n      width: {\n        ideal: 1920\n      },\n      height: {\n        ideal: 1920\n      }\n    }\n  };\n  if ((_a = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getUserMedia) {\n    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n      setStream(handleSuccess(stream, setNumberOfCameras));\n    }).catch(function (err) {\n      handleError(err, setNotSupported, setPermissionDenied);\n    });\n  } else {\n    var getWebcam = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n    if (getWebcam) {\n      getWebcam(constraints, function (stream) {\n        setStream(handleSuccess(stream, setNumberOfCameras));\n      }, function (err) {\n        handleError(err, setNotSupported, setPermissionDenied);\n      });\n    } else {\n      setNotSupported(true);\n    }\n  }\n};\nvar handleSuccess = function (stream, setNumberOfCameras) {\n  navigator.mediaDevices.enumerateDevices().then(function (r) {\n    return setNumberOfCameras(r.filter(function (i) {\n      return i.kind === 'videoinput';\n    }).length);\n  });\n  return stream;\n};\nvar handleError = function (error, setNotSupported, setPermissionDenied) {\n  console.error(error);\n  //https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n  if (error.name === 'PermissionDeniedError') {\n    setPermissionDenied(true);\n  } else {\n    setNotSupported(true);\n  }\n};\nexport { Camera };","map":{"version":3,"names":["React","useRef","useState","useEffect","useImperativeHandle","styled","__makeTemplateObject","cooked","raw","Object","defineProperty","value","Wrapper","div","templateObject_1","Container","templateObject_2","_a","aspectRatio","ErrorMsg","templateObject_3","Cam","video","templateObject_4","mirrored","Canvas","canvas","templateObject_5","Camera","forwardRef","ref","_b","facingMode","_c","_d","numberOfCamerasCallback","_e","videoSourceDeviceId","undefined","_f","errorMessages","noCameraAccessible","permissionDenied","switchCamera","_g","videoReadyCallback","player","container","_h","numberOfCameras","setNumberOfCameras","_j","stream","setStream","_k","currentFacingMode","setFacingMode","_l","notSupported","setNotSupported","_m","setPermissionDenied","takePhoto","Error","current","playerWidth","videoWidth","playerHeight","videoHeight","playerAR","canvasWidth","offsetWidth","canvasHeight","offsetHeight","canvasAR","sX","sY","sW","sH","width","height","context","getContext","drawImage","imgData","toDataURL","console","error","newFacingMode","getNumberOfCameras","initCameraStream","srcObject","getTracks","forEach","track","stop","createElement","id","muted","autoPlay","playsInline","onLoadedData","displayName","constraints","audio","deviceId","exact","ideal","navigator","mediaDevices","getUserMedia","then","handleSuccess","catch","err","handleError","getWebcam","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","enumerateDevices","r","filter","i","kind","length","name"],"sources":["C:/Users/Samue/OneDrive/Documents/University/Year 3/Computing Project/Code/RevisionWebApp/re-vision/node_modules/react-camera-pro/dist/index.esm.js"],"sourcesContent":["import React, { useRef, useState, useEffect, useImperativeHandle } from 'react';\nimport styled from 'styled-components';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n}\n\nvar Wrapper = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"])));\r\nvar Container = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  width: 100%;\\n  \", \"\\n\"], [\"\\n  width: 100%;\\n  \",\r\n    \"\\n\"])), function (_a) {\r\n    var aspectRatio = _a.aspectRatio;\r\n    return aspectRatio === 'cover'\r\n        ? \"\\n    position: absolute;\\n    bottom: 0;\\n    top: 0;\\n    left: 0;\\n    right: 0;\"\r\n        : \"\\n    position: relative;\\n    padding-bottom: \" + 100 / aspectRatio + \"%;\";\r\n});\r\nvar ErrorMsg = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  padding: 40px;\\n\"], [\"\\n  padding: 40px;\\n\"])));\r\nvar Cam = styled.video(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"])), function (_a) {\r\n    var mirrored = _a.mirrored;\r\n    return (mirrored ? '180deg' : '0deg');\r\n});\r\nvar Canvas = styled.canvas(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  display: none;\\n\"], [\"\\n  display: none;\\n\"])));\r\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\n\nvar Camera = React.forwardRef(function (_a, ref) {\r\n    var _b = _a.facingMode, facingMode = _b === void 0 ? 'user' : _b, _c = _a.aspectRatio, aspectRatio = _c === void 0 ? 'cover' : _c, _d = _a.numberOfCamerasCallback, numberOfCamerasCallback = _d === void 0 ? function () { return null; } : _d, _e = _a.videoSourceDeviceId, videoSourceDeviceId = _e === void 0 ? undefined : _e, _f = _a.errorMessages, errorMessages = _f === void 0 ? {\r\n        noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\r\n        permissionDenied: 'Permission denied. Please refresh and give camera permission.',\r\n        switchCamera: 'It is not possible to switch camera to different one because there is only one video device accessible.',\r\n        canvas: 'Canvas is not supported.',\r\n    } : _f, _g = _a.videoReadyCallback, videoReadyCallback = _g === void 0 ? function () { return null; } : _g;\r\n    var player = useRef(null);\r\n    var canvas = useRef(null);\r\n    var container = useRef(null);\r\n    var _h = useState(0), numberOfCameras = _h[0], setNumberOfCameras = _h[1];\r\n    var _j = useState(null), stream = _j[0], setStream = _j[1];\r\n    var _k = useState(facingMode), currentFacingMode = _k[0], setFacingMode = _k[1];\r\n    var _l = useState(false), notSupported = _l[0], setNotSupported = _l[1];\r\n    var _m = useState(false), permissionDenied = _m[0], setPermissionDenied = _m[1];\r\n    useEffect(function () {\r\n        numberOfCamerasCallback(numberOfCameras);\r\n    }, [numberOfCameras]);\r\n    useImperativeHandle(ref, function () { return ({\r\n        takePhoto: function () {\r\n            var _a, _b, _c, _d;\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            if (canvas === null || canvas === void 0 ? void 0 : canvas.current) {\r\n                var playerWidth = ((_a = player === null || player === void 0 ? void 0 : player.current) === null || _a === void 0 ? void 0 : _a.videoWidth) || 1280;\r\n                var playerHeight = ((_b = player === null || player === void 0 ? void 0 : player.current) === null || _b === void 0 ? void 0 : _b.videoHeight) || 720;\r\n                var playerAR = playerWidth / playerHeight;\r\n                var canvasWidth = ((_c = container === null || container === void 0 ? void 0 : container.current) === null || _c === void 0 ? void 0 : _c.offsetWidth) || 1280;\r\n                var canvasHeight = ((_d = container === null || container === void 0 ? void 0 : container.current) === null || _d === void 0 ? void 0 : _d.offsetHeight) || 1280;\r\n                var canvasAR = canvasWidth / canvasHeight;\r\n                var sX = void 0, sY = void 0, sW = void 0, sH = void 0;\r\n                if (playerAR > canvasAR) {\r\n                    sH = playerHeight;\r\n                    sW = playerHeight * canvasAR;\r\n                    sX = (playerWidth - sW) / 2;\r\n                    sY = 0;\r\n                }\r\n                else {\r\n                    sW = playerWidth;\r\n                    sH = playerWidth / canvasAR;\r\n                    sX = 0;\r\n                    sY = (playerHeight - sH) / 2;\r\n                }\r\n                canvas.current.width = sW;\r\n                canvas.current.height = sH;\r\n                var context = canvas.current.getContext('2d');\r\n                if (context && (player === null || player === void 0 ? void 0 : player.current)) {\r\n                    context.drawImage(player.current, sX, sY, sW, sH, 0, 0, sW, sH);\r\n                }\r\n                var imgData = canvas.current.toDataURL('image/jpeg');\r\n                return imgData;\r\n            }\r\n            else {\r\n                throw new Error(errorMessages.canvas);\r\n            }\r\n        },\r\n        switchCamera: function () {\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            else if (numberOfCameras < 2) {\r\n                console.error('Error: Unable to switch camera. Only one device is accessible.'); // console only\r\n            }\r\n            var newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';\r\n            setFacingMode(newFacingMode);\r\n            return newFacingMode;\r\n        },\r\n        getNumberOfCameras: function () {\r\n            return numberOfCameras;\r\n        },\r\n    }); });\r\n    useEffect(function () {\r\n        initCameraStream(stream, setStream, currentFacingMode, videoSourceDeviceId, setNumberOfCameras, setNotSupported, setPermissionDenied);\r\n    }, [currentFacingMode, videoSourceDeviceId]);\r\n    useEffect(function () {\r\n        if (stream && player && player.current) {\r\n            player.current.srcObject = stream;\r\n        }\r\n        return function () {\r\n            if (stream) {\r\n                stream.getTracks().forEach(function (track) {\r\n                    track.stop();\r\n                });\r\n            }\r\n        };\r\n    }, [stream]);\r\n    return (React.createElement(Container, { ref: container, aspectRatio: aspectRatio },\r\n        React.createElement(Wrapper, null,\r\n            notSupported ? React.createElement(ErrorMsg, null, errorMessages.noCameraAccessible) : null,\r\n            permissionDenied ? React.createElement(ErrorMsg, null, errorMessages.permissionDenied) : null,\r\n            React.createElement(Cam, { ref: player, id: \"video\", muted: true, autoPlay: true, playsInline: true, mirrored: currentFacingMode === 'user' ? true : false, onLoadedData: function () {\r\n                    videoReadyCallback();\r\n                } }),\r\n            React.createElement(Canvas, { ref: canvas }))));\r\n});\r\nCamera.displayName = 'Camera';\r\nvar initCameraStream = function (stream, setStream, currentFacingMode, videoSourceDeviceId, setNumberOfCameras, setNotSupported, setPermissionDenied) {\r\n    var _a;\r\n    // stop any active streams in the window\r\n    if (stream) {\r\n        stream.getTracks().forEach(function (track) {\r\n            track.stop();\r\n        });\r\n    }\r\n    var constraints = {\r\n        audio: false,\r\n        video: {\r\n            deviceId: videoSourceDeviceId ? { exact: videoSourceDeviceId } : undefined,\r\n            facingMode: currentFacingMode,\r\n            width: { ideal: 1920 },\r\n            height: { ideal: 1920 },\r\n        },\r\n    };\r\n    if ((_a = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getUserMedia) {\r\n        navigator.mediaDevices\r\n            .getUserMedia(constraints)\r\n            .then(function (stream) {\r\n            setStream(handleSuccess(stream, setNumberOfCameras));\r\n        })\r\n            .catch(function (err) {\r\n            handleError(err, setNotSupported, setPermissionDenied);\r\n        });\r\n    }\r\n    else {\r\n        var getWebcam = navigator.getUserMedia ||\r\n            navigator.webkitGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.msGetUserMedia;\r\n        if (getWebcam) {\r\n            getWebcam(constraints, function (stream) {\r\n                setStream(handleSuccess(stream, setNumberOfCameras));\r\n            }, function (err) {\r\n                handleError(err, setNotSupported, setPermissionDenied);\r\n            });\r\n        }\r\n        else {\r\n            setNotSupported(true);\r\n        }\r\n    }\r\n};\r\nvar handleSuccess = function (stream, setNumberOfCameras) {\r\n    navigator.mediaDevices\r\n        .enumerateDevices()\r\n        .then(function (r) { return setNumberOfCameras(r.filter(function (i) { return i.kind === 'videoinput'; }).length); });\r\n    return stream;\r\n};\r\nvar handleError = function (error, setNotSupported, setPermissionDenied) {\r\n    console.error(error);\r\n    //https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n    if (error.name === 'PermissionDeniedError') {\r\n        setPermissionDenied(true);\r\n    }\r\n    else {\r\n        setNotSupported(true);\r\n    }\r\n};\n\nexport { Camera };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}