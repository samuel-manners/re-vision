{"ast":null,"code":"import { createInitArgs, safelyRunOnBrowser } from \"../lib/utils/index.js\";\nfunction extractWidgetPayload(widgets, instantSearchInstance, payload) {\n  var initOptions = createInitArgs(instantSearchInstance, instantSearchInstance.mainIndex, instantSearchInstance._initialUiState);\n  widgets.forEach(function (widget) {\n    var widgetParams = {};\n    if (widget.getWidgetRenderState) {\n      var renderState = widget.getWidgetRenderState(initOptions);\n      if (renderState && renderState.widgetParams) {\n        // casting, as we just earlier checked widgetParams exists, and thus an object\n        widgetParams = renderState.widgetParams;\n      }\n    }\n\n    // since we destructure in all widgets, the parameters with defaults are set to \"undefined\"\n    var params = Object.keys(widgetParams).filter(function (key) {\n      return widgetParams[key] !== undefined;\n    });\n    payload.widgets.push({\n      type: widget.$$type,\n      widgetType: widget.$$widgetType,\n      params: params\n    });\n    if (widget.$$type === 'ais.index') {\n      extractWidgetPayload(widget.getWidgets(), instantSearchInstance, payload);\n    }\n  });\n}\nexport function isMetadataEnabled() {\n  return safelyRunOnBrowser(function (_ref) {\n    var _window$navigator, _window$navigator$use;\n    var window = _ref.window;\n    return ((_window$navigator = window.navigator) === null || _window$navigator === void 0 ? void 0 : (_window$navigator$use = _window$navigator.userAgent) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.indexOf('Algolia Crawler')) > -1;\n  }, {\n    fallback: function fallback() {\n      return false;\n    }\n  });\n}\n\n/**\n * Exposes the metadata of mounted widgets in a custom\n * `<meta name=\"instantsearch:widgets\" />` tag. The metadata per widget is:\n * - applied parameters\n * - widget name\n * - connector name\n */\nexport function createMetadataMiddleware() {\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref2$$$internal = _ref2.$$internal,\n    $$internal = _ref2$$$internal === void 0 ? false : _ref2$$$internal;\n  return function (_ref3) {\n    var instantSearchInstance = _ref3.instantSearchInstance;\n    var payload = {\n      widgets: []\n    };\n    var payloadContainer = document.createElement('meta');\n    var refNode = document.querySelector('head');\n    payloadContainer.name = 'instantsearch:widgets';\n    return {\n      $$type: 'ais.metadata',\n      $$internal: $$internal,\n      onStateChange: function onStateChange() {},\n      subscribe: function subscribe() {\n        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)\n        setTimeout(function () {\n          var client = instantSearchInstance.client;\n          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n          extractWidgetPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);\n          instantSearchInstance.middleware.forEach(function (middleware) {\n            return payload.widgets.push({\n              middleware: true,\n              type: middleware.instance.$$type,\n              internal: middleware.instance.$$internal\n            });\n          });\n          payloadContainer.content = JSON.stringify(payload);\n          refNode.appendChild(payloadContainer);\n        }, 0);\n      },\n      started: function started() {},\n      unsubscribe: function unsubscribe() {\n        payloadContainer.remove();\n      }\n    };\n  };\n}","map":{"version":3,"names":["createInitArgs","safelyRunOnBrowser","extractWidgetPayload","widgets","instantSearchInstance","payload","initOptions","mainIndex","_initialUiState","forEach","widget","widgetParams","getWidgetRenderState","renderState","params","Object","keys","filter","key","undefined","push","type","$$type","widgetType","$$widgetType","getWidgets","isMetadataEnabled","_ref","_window$navigator","_window$navigator$use","window","navigator","userAgent","indexOf","fallback","createMetadataMiddleware","_ref2","arguments","length","_ref2$$$internal","$$internal","_ref3","payloadContainer","document","createElement","refNode","querySelector","name","onStateChange","subscribe","setTimeout","client","ua","transporter","value","_ua","middleware","instance","internal","content","JSON","stringify","appendChild","started","unsubscribe","remove"],"sources":["C:/Users/Samue/OneDrive/Documents/University/Year 3/Computing Project/Code/RevisionWebApp/re-vision/node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js"],"sourcesContent":["import { createInitArgs, safelyRunOnBrowser } from \"../lib/utils/index.js\";\nfunction extractWidgetPayload(widgets, instantSearchInstance, payload) {\n  var initOptions = createInitArgs(instantSearchInstance, instantSearchInstance.mainIndex, instantSearchInstance._initialUiState);\n  widgets.forEach(function (widget) {\n    var widgetParams = {};\n    if (widget.getWidgetRenderState) {\n      var renderState = widget.getWidgetRenderState(initOptions);\n      if (renderState && renderState.widgetParams) {\n        // casting, as we just earlier checked widgetParams exists, and thus an object\n        widgetParams = renderState.widgetParams;\n      }\n    }\n\n    // since we destructure in all widgets, the parameters with defaults are set to \"undefined\"\n    var params = Object.keys(widgetParams).filter(function (key) {\n      return widgetParams[key] !== undefined;\n    });\n    payload.widgets.push({\n      type: widget.$$type,\n      widgetType: widget.$$widgetType,\n      params: params\n    });\n    if (widget.$$type === 'ais.index') {\n      extractWidgetPayload(widget.getWidgets(), instantSearchInstance, payload);\n    }\n  });\n}\nexport function isMetadataEnabled() {\n  return safelyRunOnBrowser(function (_ref) {\n    var _window$navigator, _window$navigator$use;\n    var window = _ref.window;\n    return ((_window$navigator = window.navigator) === null || _window$navigator === void 0 ? void 0 : (_window$navigator$use = _window$navigator.userAgent) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.indexOf('Algolia Crawler')) > -1;\n  }, {\n    fallback: function fallback() {\n      return false;\n    }\n  });\n}\n\n/**\n * Exposes the metadata of mounted widgets in a custom\n * `<meta name=\"instantsearch:widgets\" />` tag. The metadata per widget is:\n * - applied parameters\n * - widget name\n * - connector name\n */\nexport function createMetadataMiddleware() {\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref2$$$internal = _ref2.$$internal,\n    $$internal = _ref2$$$internal === void 0 ? false : _ref2$$$internal;\n  return function (_ref3) {\n    var instantSearchInstance = _ref3.instantSearchInstance;\n    var payload = {\n      widgets: []\n    };\n    var payloadContainer = document.createElement('meta');\n    var refNode = document.querySelector('head');\n    payloadContainer.name = 'instantsearch:widgets';\n    return {\n      $$type: 'ais.metadata',\n      $$internal: $$internal,\n      onStateChange: function onStateChange() {},\n      subscribe: function subscribe() {\n        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)\n        setTimeout(function () {\n          var client = instantSearchInstance.client;\n          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n          extractWidgetPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);\n          instantSearchInstance.middleware.forEach(function (middleware) {\n            return payload.widgets.push({\n              middleware: true,\n              type: middleware.instance.$$type,\n              internal: middleware.instance.$$internal\n            });\n          });\n          payloadContainer.content = JSON.stringify(payload);\n          refNode.appendChild(payloadContainer);\n        }, 0);\n      },\n      started: function started() {},\n      unsubscribe: function unsubscribe() {\n        payloadContainer.remove();\n      }\n    };\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}