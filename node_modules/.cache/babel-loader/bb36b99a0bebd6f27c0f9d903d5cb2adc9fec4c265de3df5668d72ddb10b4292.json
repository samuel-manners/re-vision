{"ast":null,"code":"// import useRef, useState, useCallback, useEffect\nimport{useRef,useState,useCallback,useEffect}from\"react\";// import Webcam component\nimport Webcam from\"react-webcam\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CustomWebcam=()=>{const webcamRef=useRef(null);// create a webcam reference\nconst[imgSrc,setImgSrc]=useState(null);// initialize it\n// Captures Photo\nconst capture=useCallback(()=>{const imageSrc=webcamRef.current.getScreenshot();setImgSrc(imageSrc);},[webcamRef]);const retake=()=>{setImgSrc(null);};// Function for sending photo\nconst sendImage=async()=>{try{// get the image file as a blob\nconst responses=await fetch(imgSrc);const blob=await responses.blob();// create a FormData object and append the blob\nconst formData=new FormData();formData.append(\"image\",blob,\"image.jpg\");// send the request with the FormData as the body\nconst response=await fetch(\"http://sam141.brighton.domains/cloudvisionapi\",{method:\"POST\",body:formData});// handle the response\nif(responses.ok){console.log(\"Image sent successfully\");console.log(responses);}else{console.error(\"Error sending image\");console.log(responses);}}catch(error){console.log(\"Error when sending image - error as follows:\");console.log(error);};};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[imgSrc?/*#__PURE__*/_jsx(\"img\",{src:imgSrc,alt:\"webcam\"}):/*#__PURE__*/_jsx(Webcam//height={960}\n//width={540}\n,{ref:webcamRef,screenshotFormat:\"image/jpeg\",screenshotQuality:0.8}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-container\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"BrowsePhotos\"}),imgSrc?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:retake,children:\"Retake photo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendImage,children:\"Send photo\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:capture,children:\"Capture photo\"})]})]});};export default CustomWebcam;","map":{"version":3,"names":["useRef","useState","useCallback","useEffect","Webcam","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CustomWebcam","webcamRef","imgSrc","setImgSrc","capture","imageSrc","current","getScreenshot","retake","sendImage","responses","fetch","blob","formData","FormData","append","response","method","body","ok","console","log","error","className","children","src","alt","ref","screenshotFormat","screenshotQuality","onClick"],"sources":["C:/Users/Samue/OneDrive/Documents/University/Year 3/Computing Project/Code/RevisionWebApp/re-vision/src/components/main/components/Camera.js"],"sourcesContent":["// import useRef, useState, useCallback, useEffect\r\nimport { useRef, useState, useCallback, useEffect } from \"react\";\r\n// import Webcam component\r\nimport Webcam from \"react-webcam\";\r\n\r\nconst CustomWebcam = () => {\r\n  const webcamRef = useRef(null); // create a webcam reference\r\n  const [imgSrc, setImgSrc] = useState(null); // initialize it\r\n\r\n  // Captures Photo\r\n  const capture = useCallback(() => {\r\n    const imageSrc = webcamRef.current.getScreenshot();\r\n    setImgSrc(imageSrc);\r\n  }, [webcamRef]);\r\n\r\n  const retake = () => {\r\n    setImgSrc(null);\r\n  };\r\n\r\n  // Function for sending photo\r\n  const sendImage = async () => {\r\n    try {\r\n\r\n      // get the image file as a blob\r\n      const responses = await fetch(imgSrc);\r\n      const blob = await responses.blob();\r\n\r\n      // create a FormData object and append the blob\r\n      const formData = new FormData();\r\n      formData.append(\"image\", blob, \"image.jpg\");\r\n\r\n      // send the request with the FormData as the body\r\n      const response = await fetch(\"http://sam141.brighton.domains/cloudvisionapi\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      })\r\n      // handle the response\r\n      if (responses.ok) {\r\n        console.log(\"Image sent successfully\");\r\n        console.log(responses);\r\n      } else {\r\n        console.error(\"Error sending image\");\r\n        console.log(responses);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.log(\"Error when sending image - error as follows:\");\r\n      console.log(error);\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {imgSrc ? (\r\n        <img src={imgSrc} alt=\"webcam\" />\r\n      ) : (\r\n        <Webcam\r\n          //height={960}\r\n          //width={540}\r\n          ref={webcamRef}\r\n          screenshotFormat=\"image/jpeg\"\r\n          screenshotQuality={0.8}\r\n        />\r\n      )}\r\n      <div className=\"btn-container\">\r\n        <button>BrowsePhotos</button>\r\n        {imgSrc ? (\r\n          <>\r\n            <button onClick={retake}>Retake photo</button>\r\n            <button onClick={sendImage}>Send photo</button>\r\n          </>\r\n        ) : (\r\n          <button onClick={capture}>Capture photo</button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default CustomWebcam;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}